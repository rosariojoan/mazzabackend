input CreateLoanInputData {
   loanInput: CreateLoanInput!
   accountingEntry: BaseEntryRegistrationInput
   schedule: [CreateLoanScheduleInput!]
   borrower: CreateCustomerInput
   lender: CreateSupplierInput
   loanCounterpartyID: ID
}

input LoanInstallmentUpdateInput {
   id: ID!
   date: Time!
   interestPaid: Float!
   principalPaid: Float!
   status: LoanScheduleStatus!
}

input UpdateLoanInputData {
   id: ID!
   accountingEntry: BaseEntryRegistrationInput
   installmentUpdate: [LoanInstallmentUpdateInput!]!
   loanInput: UpdateLoanInput!
}

type LoanCounterpartySummary {
  name: String!
  outstandingBalance: Float!
  totalBorrowed: Float!
  loansCount: Int!
  averageInterestRate: Float!
}

extend type Mutation {
   createLoan(input: CreateLoanInputData!): Loan!
   createLoanSchedule(input: [CreateLoanScheduleInput!]!, loanID: ID!): [LoanSchedule!]!

   updateLoan(input: UpdateLoanInputData!): Loan!
   updateLoanSchedule(loanID: ID!, input: [UpdateLoanScheduleInput!]!): [LoanSchedule!]!
}

extend type Query {
   aggregateLoans(
      where: LoanWhereInput
      groupBy: [LoansGroupBy!]
   ): [LoanAggregationOutput!]!
   getDebtorsList(companyID: ID!): [Customer!]!
   getLendersList(companyID: ID!): [Supplier!]!
   loanCounterpartySummary(lending: Boolean!, top: Int): [LoanCounterpartySummary!]!
   loansAging(isLending: Boolean!): [AgingBucket!]!
}
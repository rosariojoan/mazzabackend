type ClientList {
  name: String!
  outstandingBalance: Float!
  invoiceCount: Int!
}

type SupplierList {
  name: String!
  outstandingBalance: Float!
  invoiceCount: Int!
}

type ReceivableAggregationOutput {
  company: ID
  count: Int
  sum: Float
}

type PayableAggregationOutput {
  company: ID
  count: Int
  sum: Float
}

type LoanAggregationOutput {
  company: ID
  count: Int
  sum: Float
}

type CashAggregationOutput {
  inflow: Float
  outflow: Float
  balance: Float
}

type AgingBucket {
  range: String!
  totalAmount: Float!
  count: Int
}

enum ReceivablesGroupBy {
  age
  customer
  daysDue
  status
}

enum PayablesGroupBy {
  age
  name
  daysDue
  status
}

enum LoansGroupBy {
  category
  provider
  status
}

input AggregateCashInput {
  startDate: Time
  endDate: Time!
}

#-----------------------------------------------

extend type Query {
  clientList(top: Int): [ClientList!]!
  supplierList(top: Int): [SupplierList!]!

  getLoan(id: ID!): Loan!

  aggregateReceivables(
    where: ReceivableWhereInput
    groupBy: [ReceivablesGroupBy!]
  ): [ReceivableAggregationOutput!]!

  aggregatePayables(
    where: PayableWhereInput
    groupBy: [PayablesGroupBy!]
  ): [PayableAggregationOutput!]!

  aggregateCash(input: AggregateCashInput!): CashAggregationOutput!

  accountsReceivableAging(name: String): [AgingBucket!]!
  accountsPayableAging(name: String): [AgingBucket!]!

  cashBalance: Float!
}

extend type Mutation {
  updatePayable(id: ID!, input: UpdatePayableInput!): Payable!
  updateReceivable(id: ID!, input: UpdateReceivableInput!): Receivable!
}
